# AI 超级个体开发助手 v2.0 - 用户故事清单

> **版本**: v2.0
> **日期**: 2025-12-13

---

## 一、用户故事总览

| 模块 | P0 | P1 | P2 | 合计 |
|------|-----|-----|-----|------|
| 状态管理 | 3 | 2 | 1 | 6 |
| 需求分析 | 3 | 1 | 0 | 4 |
| 架构设计 | 3 | 1 | 0 | 4 |
| 代码实现 | 4 | 2 | 0 | 6 |
| E2E测试 | 3 | 1 | 0 | 4 |
| 部署 | 3 | 1 | 0 | 4 |
| 变更管理 | 4 | 1 | 0 | 5 |
| 审核系统 | 3 | 1 | 1 | 5 |
| **合计** | **26** | **10** | **2** | **38** |

---

## 二、P0 - 核心功能 (MVP)

### 2.1 状态管理模块

#### US-101: 查看项目状态
```yaml
用户故事: |
  作为超级个体，我想查看项目当前状态，
  以便知道项目在哪个阶段、进度如何、下一步做什么。

验收标准:
  - 显示当前阶段名称
  - 显示总体进度百分比
  - 显示5个阶段的状态（待开始/进行中/已完成）
  - 显示当前阶段的待办事项

触发方式: /status

示例输出: |
  📊 项目状态: my-app

  当前阶段: 代码实现 (60%)

  ┌──────────┬──────────┬──────────┬──────────┬──────────┐
  │ 需求分析  │ 架构设计  │ 代码实现  │ E2E测试  │   部署   │
  │   ✅     │   ✅     │   🔄     │   ⏳     │   ⏳    │
  └──────────┴──────────┴──────────┴──────────┴──────────┘

  待办事项:
  1. [ ] 完成用户模块代码
  2. [ ] 完成订单模块代码
  3. [ ] 集成测试
```

#### US-102: 查看阶段详情
```yaml
用户故事: |
  作为超级个体，我想查看某个阶段的详细状态，
  以便了解该阶段的产物、审核情况。

验收标准:
  - 显示阶段状态
  - 显示该阶段的产物列表
  - 显示审核状态和结果
  - 显示开始/完成时间

触发方式: /status requirements
```

#### US-103: 查看阻塞项
```yaml
用户故事: |
  作为超级个体，我想知道当前阶段的阻塞项，
  以便解决问题继续推进。

验收标准:
  - 显示缺失的必需产物
  - 显示待审核的项目
  - 显示需要人类输入的项目
```

---

### 2.2 需求分析阶段

#### US-201: 输入想法生成需求文档
```yaml
用户故事: |
  作为超级个体，我想输入我的产品想法，
  让 AI 帮我生成完整的需求文档。

验收标准:
  - 生成项目概览文档
  - 生成模块划分文档
  - 生成用户故事文档
  - 每个模块生成核心流程和验收标准
  - 文档保存到 docs/requirements/

触发方式:
  - "我想做一个..."
  - /start requirements
```

#### US-202: 审核需求文档
```yaml
用户故事: |
  作为超级个体，我想审核 AI 生成的需求文档，
  并可以提出修改意见。

验收标准:
  - 显示审核清单
  - 可以标记"通过"
  - 可以标记"需修改"并填写意见
  - 修改意见被记录
  - AI 根据意见更新文档

触发方式: /review requirements
```

#### US-203: 跳过需求审核
```yaml
用户故事: |
  作为超级个体，我想跳过需求审核直接进入下一阶段，
  以便快速推进。

验收标准:
  - 阶段标记为 skipped
  - 记录跳过原因（可选）
  - 允许进入下一阶段

触发方式: /review requirements --skip
```

---

### 2.3 架构设计阶段

#### US-301: 生成架构设计
```yaml
用户故事: |
  作为超级个体，我想让 AI 基于需求生成架构设计，
  包括技术选型、模块设计、API 和数据模型。

验收标准:
  - 生成架构概览文档
  - 生成技术选型文档
  - 生成模块设计文档
  - 生成数据模型文档
  - 生成 API 设计文档
  - 架构符合需求描述

触发方式:
  - /next (从需求阶段自动进入)
  - /start architecture
```

#### US-302: 指定技术约束
```yaml
用户故事: |
  作为超级个体，我想在架构设计时指定技术约束，
  比如必须使用某个框架或数据库。

验收标准:
  - 可以指定技术栈偏好
  - 可以指定排除的技术
  - AI 遵守指定的约束

示例: |
  用户: 使用 React + Node.js + PostgreSQL
  AI: 好的，我将基于这个技术栈进行架构设计...
```

#### US-303: 审核架构设计
```yaml
用户故事: |
  作为超级个体，我想审核架构设计，
  特别是技术选型和 API 设计。

验收标准:
  - 显示架构审核清单
  - 可以标记通过/需修改
  - 修改意见被记录和执行
```

---

### 2.4 代码实现阶段

#### US-401: 按模块生成代码
```yaml
用户故事: |
  作为超级个体，我想让 AI 按模块生成代码，
  代码应符合架构设计。

验收标准:
  - 代码符合架构设计
  - 代码结构清晰
  - 命名规范一致
  - 有适当的注释

触发方式:
  - /next (从架构阶段自动进入)
  - "开始开发用户模块"
```

#### US-402: 同时生成单元测试
```yaml
用户故事: |
  作为超级个体，我想让 AI 在生成代码时同时生成单元测试，
  确保核心逻辑有测试覆盖。

验收标准:
  - 单元测试与代码同时生成
  - 覆盖核心业务逻辑
  - 测试可运行通过
```

#### US-403: 审查代码
```yaml
用户故事: |
  作为超级个体，我想审查 AI 生成的代码，
  可以要求修改。

验收标准:
  - 显示代码审查清单
  - 可以标记通过/需修改
  - 可以指定具体修改点
```

#### US-404: 生成集成测试
```yaml
用户故事: |
  作为超级个体，我想让 AI 生成集成测试，
  测试模块间的交互。

验收标准:
  - 集成测试覆盖模块交互
  - 测试可运行通过
```

---

### 2.5 E2E测试阶段

#### US-501: 基于验收标准生成 E2E 测试
```yaml
用户故事: |
  作为超级个体，我想让 AI 基于验收标准生成 E2E 测试，
  确保关键用户场景被覆盖。

验收标准:
  - E2E 测试覆盖验收标准中的场景
  - 测试代码可执行
  - 使用合适的测试框架

触发方式:
  - /next (从代码阶段自动进入)
  - /start e2e
```

#### US-502: 审核 E2E 测试覆盖率
```yaml
用户故事: |
  作为超级个体，我想审核 E2E 测试是否覆盖了所有验收标准，
  确保没有遗漏。

验收标准:
  - 显示验收标准覆盖矩阵
  - 标识未覆盖的场景
  - 可以要求补充测试
```

#### US-503: 运行 E2E 测试
```yaml
用户故事: |
  作为超级个体，我想运行 E2E 测试并查看结果，
  了解测试通过情况。

验收标准:
  - 可以运行测试
  - 显示测试结果
  - 失败时显示详细信息
```

---

### 2.6 部署阶段

#### US-601: 生成部署文档
```yaml
用户故事: |
  作为超级个体，我想让 AI 生成部署文档，
  包括环境配置和部署步骤。

验收标准:
  - 生成环境配置文档
  - 生成部署流程文档
  - 步骤清晰可执行

触发方式:
  - /next (从 E2E 阶段自动进入)
  - /start deployment
```

#### US-602: 生成 CI/CD 配置
```yaml
用户故事: |
  作为超级个体，我想让 AI 生成 CI/CD 配置，
  实现自动化部署。

验收标准:
  - 生成 GitHub Actions 配置
  - 包含构建、测试、部署步骤
  - 配置可直接使用
```

#### US-603: 审核部署方案
```yaml
用户故事: |
  作为超级个体，我想审核部署方案，
  确认环境和流程正确。

验收标准:
  - 显示部署审核清单
  - 可以标记通过/需修改
```

---

### 2.7 变更管理

#### US-701: 发起需求变更
```yaml
用户故事: |
  作为超级个体，我想在任意阶段发起需求变更，
  描述我要修改的内容。

验收标准:
  - 变更请求被创建
  - 记录变更描述
  - 记录发起时的阶段

触发方式: /change "订单模块需要支持分期付款"
```

#### US-702: 查看变更影响分析
```yaml
用户故事: |
  作为超级个体，我想看到变更会影响哪些内容，
  包括文档、代码、测试。

验收标准:
  - 显示受影响的阶段
  - 显示受影响的文件
  - 估算影响程度（高/中/低）

示例输出: |
  📝 变更影响分析

  变更: 订单模块需要支持分期付款

  影响范围:
  ┌─────────────┬──────────┬──────────────────────────────┐
  │    阶段      │ 影响程度  │         受影响文件            │
  ├─────────────┼──────────┼──────────────────────────────┤
  │ 需求分析     │    中    │ modules/订单模块/03-核心流程.md │
  │ 架构设计     │    高    │ 04-数据模型.md, 05-API设计.md  │
  │ 代码实现     │    高    │ src/modules/order/*           │
  │ E2E测试     │    高    │ tests/e2e/order.spec.ts       │
  └─────────────┴──────────┴──────────────────────────────┘

  建议: 回退到【架构设计】阶段
```

#### US-703: 执行变更回退
```yaml
用户故事: |
  作为超级个体，我想在确认影响后执行变更，
  项目自动回退到正确的阶段。

验收标准:
  - 项目状态回退到建议阶段
  - 受影响产物标记为待更新
  - 变更执行记录被保存

触发方式: /change --execute
```

#### US-704: 查看变更历史
```yaml
用户故事: |
  作为超级个体，我想查看所有变更历史，
  了解项目演变过程。

验收标准:
  - 显示所有变更记录
  - 按时间倒序排列
  - 显示变更状态

触发方式: /change --history
```

---

### 2.8 审核系统

#### US-801: 查看审核清单
```yaml
用户故事: |
  作为超级个体，我想看到结构化的审核清单，
  知道该检查哪些点。

验收标准:
  - 每个阶段有对应清单
  - 清单项目明确可检查
  - 可以逐项勾选

示例: |
  📋 需求审核清单

  完整性:
  [ ] 所有模块都有用户故事
  [ ] 所有用户故事都有验收标准
  [ ] 边界条件已考虑

  清晰性:
  [ ] 需求描述无歧义
  [ ] 术语定义清晰

  可行性:
  [ ] 技术上可实现
  [ ] 资源在可接受范围
```

#### US-802: 记录审核意见
```yaml
用户故事: |
  作为超级个体，我想记录审核时发现的问题和意见，
  让 AI 知道需要修改什么。

验收标准:
  - 意见被保存到审核记录
  - AI 能理解并执行修改
  - 修改后可以重新审核
```

#### US-803: 查看审核历史
```yaml
用户故事: |
  作为超级个体，我想查看历史审核记录，
  回顾之前的决策。

验收标准:
  - 显示所有审核记录
  - 包含审核时间、结果、意见
  - 可以按阶段筛选

触发方式: /review --history
```

---

## 三、P1 - 增强功能

### 3.1 状态管理增强

#### US-104: 进度报告生成
```yaml
用户故事: |
  作为超级个体，我想生成项目进度报告，
  可以分享给他人或存档。

验收标准:
  - 生成 Markdown 格式报告
  - 包含各阶段状态和时间线
  - 包含关键决策记录
```

#### US-105: 项目统计信息
```yaml
用户故事: |
  作为超级个体，我想看到项目统计信息，
  如代码行数、测试覆盖率等。

验收标准:
  - 显示代码统计
  - 显示测试统计
  - 显示文档统计
```

### 3.2 其他增强

#### US-204: 需求模板选择
```yaml
用户故事: |
  作为超级个体，我想选择不同的需求模板，
  适应不同类型的项目。
```

#### US-304: 架构模式推荐
```yaml
用户故事: |
  作为超级个体，我想让 AI 推荐适合的架构模式，
  并解释原因。
```

#### US-405: 代码质量报告
```yaml
用户故事: |
  作为超级个体，我想看到代码质量报告，
  了解需要改进的地方。
```

#### US-406: 代码重构建议
```yaml
用户故事: |
  作为超级个体，我想让 AI 给出重构建议，
  改善代码质量。
```

#### US-504: 测试报告导出
```yaml
用户故事: |
  作为超级个体，我想导出测试报告，
  作为项目交付物。
```

#### US-604: 多环境部署配置
```yaml
用户故事: |
  作为超级个体，我想生成多环境（dev/staging/prod）的部署配置。
```

#### US-705: 变更影响通知
```yaml
用户故事: |
  作为超级个体，我想在变更影响分析完成时收到通知。
```

#### US-804: 审核模板自定义
```yaml
用户故事: |
  作为超级个体，我想自定义审核清单，
  添加我关心的检查项。
```

---

## 四、P2 - 未来功能

#### US-106: 项目对比
```yaml
用户故事: |
  作为超级个体，我想对比不同版本的项目状态，
  了解变化。
```

#### US-805: AI 辅助审核
```yaml
用户故事: |
  作为超级个体，我想让 AI 预先审核产物，
  标记可能的问题。
```

---

## 五、用户旅程

### 5.1 新项目完整旅程

```
1. 初始化
   ai-dev init my-app
   ↓
2. 需求分析
   用户: "我想做一个任务管理系统..."
   AI: 生成需求文档
   用户: /review → 通过
   ↓
3. 架构设计
   用户: /next
   AI: 生成架构文档
   用户: /review → 需修改，使用 PostgreSQL
   AI: 更新架构
   用户: /review → 通过
   ↓
4. 代码实现
   用户: /next
   AI: 生成代码 + 单元测试 + 集成测试
   用户: /review → 通过
   ↓
5. E2E测试
   用户: /next
   AI: 生成 E2E 测试
   用户: /review → 通过
   ↓
6. 部署
   用户: /next
   AI: 生成部署文档 + CI/CD
   用户: /review → 通过
   ↓
7. 完成
   /status → 100% 完成
```

### 5.2 需求变更旅程

```
当前阶段: 代码实现 (60%)

1. 发起变更
   用户: /change "需要支持微信登录"
   ↓
2. 影响分析
   AI: 显示影响分析报告
   建议回退到架构设计
   ↓
3. 确认执行
   用户: /change --execute
   ↓
4. 自动回退
   项目回退到架构设计阶段
   受影响文档标记待更新
   ↓
5. 继续流程
   用户: /next
   AI: 更新架构设计
   ...后续正常流程
```

---

**文档版本**: v2.0
**创建日期**: 2025-12-13
